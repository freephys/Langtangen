Check out CXX and Boost for doing this.
Straight C recipe applied to C++ gives seg.fault in the C++ code
